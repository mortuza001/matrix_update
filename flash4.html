

<!DOCTYPE html>
<html>
<head>
    <title>ESP32 Firmware Flasher</title>
    <!-- Load ESP Web Tools Library (Version 10+) -->
    <script type="module" src="https://unpkg.com/esp-web-tools@10/dist/web/install-button.js?module"></script>
</head>
<body>
    <h1>Select Firmware Version</h1>

    <!-- 1. Dropdown for selecting versions -->
    <select id="versionSelect" onchange="updateManifest()">
       <option value="./manifest1264_113.json">M12-64 v1.1.3</option>
      <option value="./manifest964_113.json">M9-64 v1.1.3</option>
    </select>

    <br><br>

    <!-- 2. The Flash Button (Initial manifest is the stable one) -->
    <esp-web-install-button id="flashButton" manifest="manifest1264_113.json">
        <button slot="activate">Flash Selected Version</button>
    </esp-web-install-button>

    <script>
        // 3. JavaScript to update the manifest attribute dynamically
        function updateManifest() {
            const select = document.getElementById('versionSelect');
            const button = document.getElementById('flashButton');
            
            // Set the new manifest path
            button.setAttribute('manifest', select.value);
            
            console.log("Manifest updated to: " + select.value);
        }
    </script>
</body>
</html>

