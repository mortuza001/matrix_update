

<!DOCTYPE html>
<html>
<head>
    <title>Infoblox Firmware Flasher</title>
    <!-- Load ESP Web Tools Library (Version 10+) -->
    <script type="module" src="https://unpkg.com/esp-web-tools@10.1.1/dist/web/install-button.js?module"></script>
</head>
<body>
    <h1>Select Model & Firmware Version</h1>

    <!-- 1. Dropdown for selecting versions -->
    <select id="versionSelect" onchange="updateManifest()">
               <option value="./manifest1264_196.json">Infomatrix M12-64 v1.9.6</option>
      <option value="./manifest964_196.json">Infomatrix M9-64 v1.9.6</option>
       <option value="./manifest1264_190.json">Infomatrix M12-64 v1.9.0</option>
      <option value="./manifest964_190.json">Infomatrix M9-64 v1.9.0</option>
         <option value="./manifest1264_141.json">Infomatrix M12-64 v1.4.1</option>
      <option value="./manifest964_141.json">Infomatrix M9-64 v1.4.1</option>
        <option value="./manifest1264_152.json">Infomatrix M12-64 v1.5.2</option>
         <option value="./manifest964_X1141.json">Infomatrix X9-64 v1.14.1</option>
    </select>

    <br><br>

    <!-- 2. The Flash Button (Initial manifest is the stable one) -->
    <esp-web-install-button id="flashButton" manifest="./manifest.json">
        <button slot="activate">Flash Selected Version</button>
    </esp-web-install-button>

    <script>
        // 3. JavaScript to update the manifest attribute dynamically
        function updateManifest() {
            const select = document.getElementById('versionSelect');
            const button = document.getElementById('flashButton');
            
            // Set the new manifest path
            button.setAttribute('manifest', select.value);
            
            console.log("Manifest updated to: " + select.value);
        }
    </script>
</body>
</html>

